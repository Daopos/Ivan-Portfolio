import { motion, animate } from "framer-motion";
import React, { useEffect, useState } from "react";
const wavePaths = [
  "M0,64L48,64C96,64,192,64,288,90.7C384,117,480,171,576,165.3C672,160,768,96,864,69.3C960,43,1056,53,1152,53.3C1248,53,1344,43,1392,37.3L1440,32V320H0Z",
  "M0,128L48,122.7C96,117,192,107,288,96C384,85,480,75,576,64C672,53,768,43,864,80C960,117,1056,203,1152,234.7C1248,267,1344,245,1392,234.7L1440,224V320H0Z",
  "M0,96L48,106.7C96,117,192,139,288,128C384,117,480,75,576,53.3C672,32,768,32,864,58.7C960,85,1056,139,1152,181.3C1248,224,1344,256,1392,272L1440,288V320H0Z",
  "M0,256L48,224C96,192,192,128,288,122.7C384,117,480,171,576,181.3C672,192,768,160,864,149.3C960,139,1056,149,1152,128C1248,107,1344,53,1392,26.7L1440,0V320H0Z",
  "M0,224L48,213.3C96,203,192,181,288,160C384,139,480,117,576,106.7C672,96,768,96,864,117.3C960,139,1056,181,1152,208C1248,235,1344,245,1392,250.7L1440,256V320H0Z",
  "M0,224L30,218.7C60,213,120,203,180,186.7C240,171,300,149,360,154.7C420,160,480,192,540,181.3C600,171,660,117,720,133.3C780,149,840,235,900,266.7C960,299,1020,277,1080,240C1140,203,1200,149,1260,138.7C1320,128,1380,160,1410,176L1440,192L1440,320L1410,320C1380,320,1320,320,1260,320C1200,320,1140,320,1080,320C1020,320,960,320,900,320C840,320,780,320,720,320C660,320,600,320,540,320C480,320,420,320,360,320C300,320,240,320,180,320C120,320,60,320,30,320L0,320Z",
  "M0,128L30,122.7C60,117,120,107,180,122.7C240,139,300,181,360,208C420,235,480,245,540,234.7C600,224,660,192,720,197.3C780,203,840,245,900,272C960,299,1020,309,1080,309.3C1140,309,1200,299,1260,277.3C1320,256,1380,224,1410,208L1440,192L1440,320L1410,320C1380,320,1320,320,1260,320C1200,320,1140,320,1080,320C1020,320,960,320,900,320C840,320,780,320,720,320C660,320,600,320,540,320C480,320,420,320,360,320C300,320,240,320,180,320C120,320,60,320,30,320L0,320Z",
  "M0,256L30,218.7C60,181,120,107,180,85.3C240,64,300,96,360,133.3C420,171,480,213,540,202.7C600,192,660,128,720,90.7C780,53,840,43,900,74.7C960,107,1020,181,1080,218.7C1140,256,1200,256,1260,218.7C1320,181,1380,107,1410,69.3L1440,32L1440,320L1410,320C1380,320,1320,320,1260,320C1200,320,1140,320,1080,320C1020,320,960,320,900,320C840,320,780,320,720,320C660,320,600,320,540,320C480,320,420,320,360,320C300,320,240,320,180,320C120,320,60,320,30,320L0,320Z",
  "M0,128L30,154.7C60,181,120,235,180,224C240,213,300,139,360,144C420,149,480,235,540,240C600,245,660,171,720,165.3C780,160,840,224,900,229.3C960,235,1020,181,1080,176C1140,171,1200,213,1260,229.3C1320,245,1380,235,1410,229.3L1440,224L1440,320L1410,320C1380,320,1320,320,1260,320C1200,320,1140,320,1080,320C1020,320,960,320,900,320C840,320,780,320,720,320C660,320,600,320,540,320C480,320,420,320,360,320C300,320,240,320,180,320C120,320,60,320,30,320L0,320Z",
  "M0,160L30,165.3C60,171,120,181,180,197.3C240,213,300,235,360,240C420,245,480,235,540,213.3C600,192,660,160,720,149.3C780,139,840,149,900,176C960,203,1020,245,1080,261.3C1140,277,1200,267,1260,266.7C1320,267,1380,277,1410,282.7L1440,288L1440,320L1410,320C1380,320,1320,320,1260,320C1200,320,1140,320,1080,320C1020,320,960,320,900,320C840,320,780,320,720,320C660,320,600,320,540,320C480,320,420,320,360,320C300,320,240,320,180,320C120,320,60,320,30,320L0,320Z",
];

const Waves = () => {
  const [currentD, setCurrentD] = useState(wavePaths[0]);

  useEffect(() => {
    const stepSize = 50; // every 150px
    let animation;

    const handleScroll = () => {
      const index = Math.floor(window.scrollY / stepSize) % wavePaths.length;
      const nextD = wavePaths[index];

      animation?.stop?.();
      animation = animate(currentD, nextD, {
        duration: 0.7,
        onUpdate: (latest) => setCurrentD(latest),
      });
    };

    window.addEventListener("scroll", handleScroll);
    return () => window.removeEventListener("scroll", handleScroll);
  }, [currentD]);
  return (
    <div style={{ position: "fixed", bottom: 0, left: 0, width: "100%" }}>
      <svg
        viewBox="0 0 1440 220"
        preserveAspectRatio="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <motion.path fill="#14FFEC" d={currentD} />
      </svg>
    </div>
  );
};

export default Waves;
